# Reservation System API

Этот проект представляет собой два сервиса, которые формируют связанную систему для управления резервациями в ресторане. Важно отметить, что данная система разработана в виде заглушки и не осуществляет фактические резервации. Вместо этого, она демонстрирует процесс обработки резерваций и взаимодействия между компонентами.

Первый сервис принимает запросы на создание резерваций и направляет их в очередь RabbitMQ. Второй сервис, в свою очередь, обрабатывает эти резервации, имитируя различные сценарии в зависимости от статуса гостя. Результаты обработки передаются обратно через очередь RabbitMQ, и первый сервис формирует ответ на исходный POST-запрос.

Пожалуйста, имейте в виду, что данное решение используется исключительно в целях демонстрации и не предоставляет реальной функциональности по резервации столов в ресторане.

## Установка и Запуск

Для использования этого проекта необходимо иметь Docker установленным на вашем компьютере. Если Docker ещё не установлен, вы можете скачать его с [официального сайта Docker](https://www.docker.com/get-started).

1. Скачайте файл `docker-compose.yml` из данного репозитория, нажав на кнопку "Download" или используя команду:

```
  git clone <URL репозитория>
```

2. Откройте терминал и перейдите в директорию, где находится скачанный файл `docker-compose.yml`.

3. Запустите проект с помощью команды:
```
  docker-compose up
```

Это действие запустит сборку и запуск двух связанных сервисов в соответствии с настройками в файле `docker-compose.yml`.

После выполнения указанных шагов, проект будет доступен для использования. Обратите внимание, что данный проект использует заглушки для демонстрации и не обеспечивает реальной функциональности резервации столов.

## Запуск отдельных сервисов

Вы также можете запустить каждый из сервисов отдельно для разработки и тестирования.

1. Скачайте каждый из репозиториев с помощью команды:
   
```
  git clone <URL репозитория>
```
Для каждого из сервисов (microservice1 и microservice2) выполните следующие шаги:
 
2. Откройте терминал и перейдите в папку репозитория.
   
3. Перейдите в папку сервиса:
```
  cd <название-папки-с-сервисом>
```
4. Установите зависимости:
```
  npm install
```
5. Выполните сборку:

```
  npm run build
```

6. Запустите сервис:

```
  npm start
```

Пожалуйста, предварительно убедитесь, что вы настроили файл `.env` в каждом из сервисов с необходимыми переменными окружения, такими как `RABBITMQ_USER`, `RABBITMQ_PASS`, `PORT_RABBITMQ`, `REDIS_URL`.

## Отправка запроса на резервацию

Для создания новой резервации отправьте POST запрос на `/api/reservations` с JSON телом, содержащим следующие поля:
```
export interface IReservationData {
  reservation_id: string;
  user_id: string;
  restaurant_id: string;
  date: string;
  time: string;
  party_size: number;
  guest_type: "Regular Guest" | "VIP Guest" | "Loyalty Program Member";
  preferences?: string;
  loyalty_program?: boolean;
  special_requests?: string;
  children?: {
    count: number;
    ages: number[];
  };
  additional_services?: string[];
  confirmation_method?: string;
  payment_method?: string;
  contact_info?: {
    phone?: string;
    email?: string;
  };
  recommendation_request?: string;
}
```
Вы можете воспользоваться валидными тестовыми данными из файла `testData.json`, который находится в корне проекта.

## Ответ на запрос
Сервис возвращает ответ в формате JSON с полем "message", указывающим статус обработки резервации:

```
{
  "message": "Reservation received. Status: NO_TABLE_AVAILABLE"
}
```
# Доступные API endpoint'ы

Сервис предоставляет следующие API endpoint'ы:

### POST запросы

- **Создание новой резервации**
  - **Маршрут:** `/api/reservations`
  - **Описание:** Выполняет создание новой резервации на основе предоставленных данных.

### GET запросы

- **Проверка статуса сервиса**
  - **Маршрут:** `/status`
  - **Описание:** Позволяет проверить текущий статус сервиса.

- **Получение информации о сервисе**
  - **Маршрут:** `/info`
  - **Описание:** Возвращает информацию о характеристиках и параметрах сервиса.


Для использования каждого из этих endpoint'ов, вы можете отправлять соответствующие запросы на соответствующий адрес. Обратите внимание, что `API_RESERVATIONS` предназначен для `POST` запросов, тогда как `STATUS` и `INFO` доступны для `GET` запросов.
